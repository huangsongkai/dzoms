webpackJsonp([3],{0:function(e,t,n){"use strict";n(501),n(502),n(504),n(503)},147:function(e,t,n){t=e.exports=n(17)(),t.push([e.id,'.ant-collapse{background-color:#f7f7f7;border-radius:4px;border:1px solid #d9d9d9;border-bottom:0}.ant-collapse>.ant-collapse-item{border-bottom:1px solid #d9d9d9}.ant-collapse>.ant-collapse-item>.ant-collapse-header{height:38px;line-height:38px;padding-left:32px;color:rgba(0,0,0,.85);cursor:pointer;position:relative;-webkit-transition:all .3s;transition:all .3s}.ant-collapse>.ant-collapse-item>.ant-collapse-header:active{background-color:#eee!important}.ant-collapse>.ant-collapse-item>.ant-collapse-header .arrow{font-size:12px;font-size:9px\\9;-webkit-transform:scale(.75) rotate(0);transform:scale(.75) rotate(0);-ms-filter:"progid:DXImageTransform.Microsoft.Matrix(sizingMethod=\'auto expand\', M11=1, M12=0, M21=0, M22=1)";zoom:1;font-style:normal;vertical-align:baseline;text-align:center;text-transform:none;line-height:1;text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;position:absolute;color:rgba(0,0,0,.43);display:inline-block;font-weight:700;line-height:40px;vertical-align:middle;-webkit-transition:-webkit-transform .24s;transition:-webkit-transform .24s;transition:transform .24s;transition:transform .24s,-webkit-transform .24s;top:0;left:16px;top:16px\\9;left:0\\9}:root .ant-collapse>.ant-collapse-item>.ant-collapse-header .arrow{-webkit-filter:none;filter:none;font-size:12px}.ant-collapse>.ant-collapse-item>.ant-collapse-header .arrow:before{display:block;font-family:anticon!important;content:"\\E61F"}.ant-collapse-anim-active{-webkit-transition:height .2s cubic-bezier(.215,.61,.355,1);transition:height .2s cubic-bezier(.215,.61,.355,1)}.ant-collapse-content{overflow:hidden;color:rgba(0,0,0,.65);padding:0 16px;background-color:#fff}.ant-collapse-content>.ant-collapse-content-box{padding-top:16px;padding-bottom:16px}.ant-collapse-content-inactive{display:none}.ant-collapse-item:last-child>.ant-collapse-content{border-radius:0 0 4px 4px}.ant-collapse>.ant-collapse-item>.ant-collapse-header[aria-expanded=true] .arrow{display:inline-block;font-size:12px;font-size:9px\\9;-webkit-transform:scale(.75) rotate(90deg);transform:scale(.75) rotate(90deg);-ms-filter:"progid:DXImageTransform.Microsoft.Matrix(sizingMethod=\'auto expand\', M11=0.00000000000000006123, M12=-1, M21=1, M22=0.00000000000000006123)";zoom:1}:root .ant-collapse>.ant-collapse-item>.ant-collapse-header[aria-expanded=true] .arrow{-webkit-filter:none;filter:none;font-size:12px}.ant-collapse-borderless{background-color:#fff;border:0}.ant-collapse-borderless>.ant-collapse-item-active{border:0}.ant-collapse-borderless>.ant-collapse-item>.ant-collapse-content{background-color:transparent;border-top:1px solid #d9d9d9}.ant-collapse-borderless>.ant-collapse-item>.ant-collapse-header{-webkit-transition:all .3s;transition:all .3s}.ant-collapse-borderless>.ant-collapse-item>.ant-collapse-header:hover{background-color:#f7f7f7}',""])},429:function(e,t,n){"use strict";n(19),n(417)},430:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.CollapsePanel=void 0;var r=n(5),l=a(r),o=n(10),s=a(o),i=n(6),c=a(i),u=n(8),f=a(u),d=n(7),p=a(d),m=n(1),h=a(m),y=n(720),v=a(y),b=n(4),g=a(b),k=n(196),E=a(k),w=(t.CollapsePanel=function(e){function t(){return(0,c.default)(this,t),(0,f.default)(this,e.apply(this,arguments))}return(0,p.default)(t,e),t}(h.default.Component),function(e){function t(){return(0,c.default)(this,t),(0,f.default)(this,e.apply(this,arguments))}return(0,p.default)(t,e),t.prototype.render=function(){var e=this.props,t=e.prefixCls,n=e.className,a=void 0===n?"":n,r=e.bordered,o=(0,g.default)((0,s.default)({},t+"-borderless",!r),a);return h.default.createElement(v.default,(0,l.default)({},this.props,{className:o}))},t}(h.default.Component));t.default=w,w.Panel=v.default.Panel,w.defaultProps={prefixCls:"ant-collapse",bordered:!0,openAnimation:(0,l.default)({},E.default,{appear:function(){}})}},431:[898,881],501:function(e,t,n){(function(e,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){return function(t){return C(T(t,e),e)}}Object.defineProperty(t,"__esModule",{value:!0});var c=(n(46),n(45)),u=r(c),f=(n(23),n(22)),d=r(f),p=n(62),m=r(p),h=n(58),y=r(h),v=n(1),b=r(v),g=n(59),k=r(g),E=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),w=n(13),x=r(w),P={ProcessesList:{displayName:"ProcessesList"}},C=(0,k.default)({filename:"/Users/huang/work/newProject/components/process/processesList.js",components:P,locals:[e],imports:[b.default]}),T=(0,y.default)({filename:"/Users/huang/work/newProject/components/process/processesList.js",components:P,locals:[],imports:[b.default,m.default]}),j=i("ProcessesList")(function(e){function t(e){l(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={recResult:[]},n}return s(t,e),E(t,[{key:"componentDidMount",value:function(){var e=this;a.ajax({type:"GET",url:"/DZOMS/ky/repository/process-definitions",dataType:"json",contentType:"application/json",success:function(t){e.setState({recResult:t.data})},error:function(e){alert("操作失败")}})}},{key:"startForm",value:function(e){window.location.href="/DZOMS/ky/activity/process/start/"+this.state.recResult[e].key}},{key:"render",value:function(){var e=this,t=[{title:"序号",render:function(e,t,n){return b.default.createElement("span",null,n++)}},{title:"流程名称",dataIndex:"key"},{title:"流程图预览",dataIndex:"diagramResource"},{title:"启动",key:"action",render:function(t,n,a){return b.default.createElement(d.default,{onClick:e.startForm.bind(e,a)},"启动")}}];return b.default.createElement("div",null,b.default.createElement(u.default,{columns:t,dataSource:this.state.recResult}))}}]),t}(b.default.Component));document.getElementById("processesList")&&x.default.render(b.default.createElement(j,null),document.getElementById("processesList")),t.default=j}).call(t,n(25)(e),n(32))},502:function(e,t,n){(function(e,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){return function(t){return j(O(t,e),e)}}Object.defineProperty(t,"__esModule",{value:!0});var c=(n(23),n(22)),u=r(c),f=(n(27),n(39)),d=r(f),p=(n(38),n(37)),m=r(p),h=n(62),y=r(h),v=n(58),b=r(v),g=n(1),k=r(g),E=n(59),w=r(E),x=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),P=n(13),C=r(P),T={StartForm:{displayName:"StartForm"}},j=(0,w.default)({filename:"/Users/huang/work/newProject/components/process/startForm.js",components:T,locals:[e],imports:[k.default]}),O=(0,b.default)({filename:"/Users/huang/work/newProject/components/process/startForm.js",components:T,locals:[],imports:[k.default,y.default]}),I=m.default.Item,_=i("StartForm")(function(e){function t(e){l(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={recResult:[],processName:""},n.key="",n}return s(t,e),x(t,[{key:"componentDidMount",value:function(){this.key=window.location.href.substring(window.location.href.lastIndexOf("/")+1);var e=this.key,t=this;t.setState({processName:e}),a.ajax({type:"POST",url:"/DZOMS/ky/activity/process/getStartFormProperties/"+e,dataType:"json",contentType:"application/json",success:function(e){t.setState({recResult:e.data})},error:function(e){alert("操作失败")}})}},{key:"handleSubmit",value:function(e){var t=this.key;e.preventDefault();var n;this.props.form.validateFields(function(e,r){e||(n=r,a.ajax({type:"POST",url:"/DZOMS/ky/activity/process/startForm/"+t,data:JSON.stringify(n),dataType:"json",contentType:"application/from",success:function(e){e.status>0&&(window.location.href="/DZOMS/ky/activity/task/list")},error:function(e){alert("失败")}}),console.log(n))})}},{key:"genFormItem",value:function(){var e=this.props.form.getFieldDecorator,t=this.state.recResult,n=t.map(function(t){return k.default.createElement(I,{label:t.name,labelCol:{span:4},wrapperCol:{span:12}},e(t.name,{rules:[{required:!0,message:"该字段不能为空!"}]})(k.default.createElement(d.default,null)))});return n}},{key:"render",value:function(){this.props.form.getFieldDecorator;return k.default.createElement(m.default,{onSubmit:this.handleSubmit.bind(this)},k.default.createElement(I,{label:"流程名称",labelCol:{span:4},wrapperCol:{span:12}},k.default.createElement("span",null,this.state.processName)),this.genFormItem(),k.default.createElement(I,{wrapperCol:{span:8,offset:4}},k.default.createElement(u.default,{type:"primary",htmlType:"submit",className:"login-form-button"},"提交")))}}]),t}(k.default.Component)),S=m.default.create()(_);document.getElementById("startForm")&&C.default.render(k.default.createElement(S,null),document.getElementById("startForm")),t.default=_}).call(t,n(25)(e),n(32))},503:function(e,t,n){(function(e,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){return function(t){return H(z(t,e),e)}}Object.defineProperty(t,"__esModule",{value:!0});var c=(n(23),n(22)),u=r(c),f=(n(74),n(73)),d=r(f),p=(n(429),n(199)),m=r(p),h=(n(76),n(75)),y=r(h),v=(n(38),n(37)),b=r(v),g=(n(209),n(122)),k=r(g),E=(n(27),n(39)),w=r(E),x=(n(431),n(430)),P=r(x),C=(n(208),n(121)),T=r(C),j=n(62),O=r(j),I=n(58),_=r(I),S=n(1),M=r(S),A=n(59),D=r(A),N=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},L=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),V=n(13),F=r(V),K={SelectInfo:{displayName:"SelectInfo"},TaskCollapse:{displayName:"TaskCollapse"},TaskDetails:{displayName:"TaskDetails"}},H=(0,D.default)({filename:"/Users/huang/work/newProject/components/process/taskDetails.js",components:K,locals:[e],imports:[M.default]}),z=(0,_.default)({filename:"/Users/huang/work/newProject/components/process/taskDetails.js",components:K,locals:[],imports:[M.default,O.default]}),B=T.default.Group,Z=T.default.Button,G=P.default.Panel,U=w.default.Group,J=k.default.Option,q=b.default.Item,W=i("SelectInfo")(function(e){function t(e){l(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={data:null,searchInfo:"",cphValue:"",errorMessage:""},n.index=0,n}return s(t,e),L(t,[{key:"searchKeyword",value:function(e){this.index=0;var t=e.target.value;if(""==t)return void this.setState({searchInfo:""});var n=this.props.recCph,a=n.filter(function(e){return e.indexOf(t)>-1});this.setState({searchInfo:a})}},{key:"genRows",value:function(e){var t={paddingLeft:8,position:"absolute",minHeight:50,width:"95%",left:0,top:33,borderWidth:1,borderColor:"#ddd",borderStyle:"solid",listStyle:"none",zIndex:99,backgroundColor:"#fff",lineHeight:2};if(""==e)return"";var n=this,a=0,r=e.map(function(e){return a++,M.default.createElement("li",{key:a,onClick:n.liClickSelected.bind(n)},e)});return M.default.createElement("ul",{className:"selected",style:t},r)}},{key:"liClickSelected",value:function(e){this.refs.information.value=e.target.innerText;var t=this.refs.information.value;this.setState({searchInfo:"",cphValue:t}),this.props.changecphValue(t);this.checkedValueExist()}},{key:"handleKeyPress",value:function(e){var t=e.keyCode,n=a(".selected>li");n.removeClass("active");this.props.recCph;if(40==t){if(this.index==a(".selected>li").length)return void(this.index=0);a(n[this.index]).addClass("active"),this.index++}if(38==t){if(0==this.index)return;this.index--,a(n[this.index-1]).addClass("active"),console.log(this.index)}if(13==t){this.refs.information.value=a(".selected>li")[this.index-1].innerText,this.setState({searchInfo:"",cphValue:this.refs.information.value});var r=this.refs.information.value;this.props.changecphValue(r),this.index=0;this.refs.information.value;this.checkedValueExist()}}},{key:"checkedValueExist",value:function(){for(var e=this.refs.information.value,t=this.props.recCph,n=!1,r=0;r<t.length;r++)if(e==t[r]){n=!0;break}n?this.setState({errorMessage:""}):this.setState({errorMessage:"字段不存在，请重新输入"}),""===a.trim(e)&&this.setState({errorMessage:"该字段不能为空!"})}},{key:"onChange",value:function(e,t){console.log(e,t)}},{key:"render",value:function(){var e={borderWidth:1,borderColor:"#ddd",borderStyle:"solid",borderRadius:3,height:29,width:"100%",paddingLeft:8},t=this.genRows(this.state.searchInfo);return M.default.createElement("div",{style:{display:"inline-block",width:"85%",position:"relative",lineHeight:0}},M.default.createElement("input",{style:e,ref:"information",onKeyDown:this.handleKeyPress.bind(this),onBlur:this.checkedValueExist.bind(this),onChange:this.searchKeyword.bind(this)}),M.default.createElement("span",{style:{color:"#F04134",position:"relative",top:13,left:3,fontSize:12}},this.state.errorMessage),t)}}]),t}(M.default.Component)),X=i("TaskCollapse")(function(e){function t(e){l(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={result:{},error:{},help:{},recCph:[],confirmLoading:!1,visible:!1},n.CphValue="",n.cphId="",n.cphPrefix="",n.objCph={},n}return s(t,e),L(t,[{key:"callback",value:function(e){}},{key:"changecphValue",value:function(e){this.CphValue=e;var t=this.cphPrefix+e;this.objCph[this.cphId]=t}},{key:"onChange",value:function(e,t){var n=this.state.result;"object"==("undefined"==typeof t?"undefined":R(t))||"proxy"==typeof t?n[e]=t.target.value:n[e]=t,this.setState({result:n})}},{key:"chepaihaoChange",value:function(e,t){this.cphId=e,this.cphPrefix=t;var n=this;a.ajax({type:"get",url:"/chepaihaoA",data:JSON.stringify(t),dataType:"json",contentType:"application/json",success:function(e){n.setState({recCph:e})},error:function(e){alert("失败")}})}},{key:"formSubmit",value:function(){var e=this,t=window.location.pathname.substring(window.location.pathname.lastIndexOf("/")+1);this.props.form.validateFields(function(n,r){if(!n){var l=Object.assign(e.state.result,e.objCph);console.log(l),a.ajax({type:"POST",url:"/DZOMS/ky/activity/task/"+t,data:JSON.stringify(l),dataType:"json",contentType:"application/json",success:function(e){e.status>0?y.default.success({title:"提示信息",content:"保存成功！"}):y.default.error({title:"错误信息",content:"保存失败！"})},error:function(e){alert("失败")}})}})}},{key:"showModal",value:function(){this.setState({visible:!0})}},{key:"handleOk",value:function(){var e=this;this.setState({ModalText:"The modal will be closed after two seconds",confirmLoading:!0}),setTimeout(function(){e.setState({visible:!1,confirmLoading:!1})},1e3)}},{key:"handleCancel",value:function(){console.log("Clicked cancel button"),this.setState({visible:!1})}},{key:"genPanels",value:function(){var e,t={textAlign:"right",height:"28px",lineHeight:"28px"},n=this,a=n.props.form.getFieldDecorator,r={labelCol:{span:4},wrapperCol:{span:16}},l=this.props.data.map(function(l,o){return console.log(l.name),l.variables?(e=l.variables.map(function(e){return M.default.createElement("div",null,M.default.createElement(U,{style:t},M.default.createElement(m.default,{span:"4"},M.default.createElement("span",null,e.name)),M.default.createElement(m.default,{span:"16"},M.default.createElement(w.default,{defaultValue:e.value,disabled:!0}))),M.default.createElement("br",null))}),M.default.createElement(G,{header:l.name,key:n.props.data.length-o},M.default.createElement("div",null,M.default.createElement(U,{style:t},M.default.createElement(m.default,{span:"4"},M.default.createElement("span",null,"任务名称：")),M.default.createElement(m.default,{span:"16"},M.default.createElement(w.default,{defaultValue:l.name,disabled:!0}))),M.default.createElement("br",null),M.default.createElement(U,{style:t},M.default.createElement(m.default,{span:"4"},M.default.createElement("span",null,"处理人：")),M.default.createElement(m.default,{span:"16"},M.default.createElement(w.default,{defaultValue:l.assignee,disabled:!0}))),M.default.createElement("br",null),M.default.createElement(U,{style:t},M.default.createElement(m.default,{span:"4"},M.default.createElement("span",null,"处理时间：")),M.default.createElement(m.default,{span:"16"},M.default.createElement(w.default,{defaultValue:l.time,disabled:!0}))),M.default.createElement("br",null)),e)):l.formProperties?(e=l.formProperties.map(function(e){var t,l=e.type;switch(l){case"chepaihao":t=M.default.createElement(q,N({label:e.name},r),a(e.name,{rules:[{required:!0,message:"该字段不能为空!"}]})(M.default.createElement("div",null,M.default.createElement(U,{compact:!0,style:{width:"100%"}},M.default.createElement(k.default,{style:{width:"15%"},placeholder:"车牌归属地",onChange:n.chepaihaoChange.bind(n,e.id)},M.default.createElement(J,{value:"黑A"},"黑A"),M.default.createElement(J,{value:"黑B"},"黑B"),M.default.createElement(J,{value:"黑C"},"黑C"),M.default.createElement(J,{value:"黑D"},"黑D"),M.default.createElement(J,{value:"黑E"},"黑E"),M.default.createElement(J,{value:"黑F"},"黑F"),M.default.createElement(J,{value:"黑G"},"黑G"),M.default.createElement(J,{value:"黑H"},"黑H"),M.default.createElement(J,{value:"黑J"},"黑J"),M.default.createElement(J,{value:"黑K"},"黑K"),M.default.createElement(J,{value:"黑L"},"黑L"),M.default.createElement(J,{value:"黑M"},"黑M"),M.default.createElement(J,{value:"黑N"},"黑N"),M.default.createElement(J,{value:"黑P"},"黑P"),M.default.createElement(J,{value:"黑R"},"黑R")),M.default.createElement(W,N({changecphValue:n.changecphValue.bind(n),style:{width:"50%",display:"inlineBlock"},recCph:n.state.recCph},n.props))))));break;case"boolean":t=M.default.createElement(q,N({label:e.name},r),a(e.name,{rules:[{required:!0,message:"该字段不能为空!"}]})(M.default.createElement(B,{style:{width:"100%"},onChange:n.onChange.bind(n,e.id)},M.default.createElement(Z,{value:"是"},"是"),M.default.createElement(Z,{value:"否"},"否"))));break;case"number":t=M.default.createElement(q,N({label:e.name},r),a(e.name,{rules:[{required:!0,message:"该字段不能为空!"}]})(M.default.createElement(d.default,{style:{width:"100%"},min:0,max:100,onChange:n.onChange.bind(n,e.id)})));break;case"select":t=M.default.createElement(q,N({label:e.name},r),a(e.name,{rules:[{required:!0,message:"该字段不能为空!"}]})(M.default.createElement(k.default,{showSearch:!0,style:{width:"100%"},placeholder:"Select a person",optionFilterProp:"children",onChange:n.onChange.bind(n,e.id),filterOption:function(e,t){return t.props.value.toLowerCase().indexOf(e.toLowerCase())>=0}},M.default.createElement(J,{value:"jack"},"Jack"),M.default.createElement(J,{value:"lucy"},"Lucy"),M.default.createElement(J,{value:"tom"},"Tom"))));break;default:t=M.default.createElement(q,N({label:e.name},r),a(e.name,{rules:[{required:!0,message:"该字段不能为空!"}]})(M.default.createElement(w.default,{onChange:n.onChange.bind(n,e.id)})))}return t}),M.default.createElement(G,{header:l.name,key:n.props.data.length-o},M.default.createElement(b.default,null,e,M.default.createElement(q,{wrapperCol:{span:8,offset:4}},M.default.createElement(u.default,{type:"danger",style:{marginLeft:5,width:100},onClick:n.showModal.bind(n)},"返回上一步"),M.default.createElement(u.default,{type:"primary",style:{marginLeft:5,width:100},onClick:n.formSubmit.bind(n),className:"login-form-button"},"提交"),M.default.createElement(y.default,{title:"提示信息",visible:n.state.visible,confirmLoading:n.state.confirmLoading,onOk:n.handleOk.bind(n),onCancel:n.handleCancel.bind(n)},M.default.createElement("p",null,"返回上一步将会把任务回退给上一个部门，确定要执行该操作吗？")))))):void 0});return l}},{key:"genProcessHisInfoRows",value:function(){var e={textAlign:"right",height:"28px",lineHeight:"28px"},t=this.props.processHisInfo,n=t.map(function(t){return M.default.createElement("div",null,M.default.createElement("div",{style:e},M.default.createElement(m.default,{span:"4",style:{textAlign:"right"}},M.default.createElement("span",null,"申请人：")),M.default.createElement(m.default,{span:"8",style:{textAlign:"left"}},M.default.createElement("span",null,t.startUserId))),M.default.createElement("div",{style:e},M.default.createElement(m.default,{span:"4",style:{textAlign:"right"}},M.default.createElement("span",null,"开始时间：")),M.default.createElement(m.default,{span:"8",style:{textAlign:"left"}},M.default.createElement("span",null,t.startTime))),M.default.createElement("div",{style:e},M.default.createElement(m.default,{span:"4",style:{textAlign:"right"}},M.default.createElement("span",null,"结束时间：")),M.default.createElement(m.default,{span:"8",style:{textAlign:"left"}},M.default.createElement("span",null,t.endTime))))});return n}},{key:"genProcessVarInfoRows",value:function(){var e=this.props.processVarInfo,t={textAlign:"right",height:"28px",lineHeight:"28px"},n=e.map(function(e){return M.default.createElement("div",{style:t},M.default.createElement(m.default,{span:"4",style:{textAlign:"right"}},M.default.createElement("span",null,e.variable.name,"：")),M.default.createElement(m.default,{span:"8",style:{textAlign:"left"}},M.default.createElement("span",null,e.variable.value)))});return n}},{key:"render",value:function(){var e={textAlign:"left",height:"40px",width:"100%",lineHeight:"40px",borderRadius:"3px",backgroundColor:"#ddd",paddingLeft:"10px",color:"#252525"};return M.default.createElement("div",null,M.default.createElement("p",{style:e},"流程信息"),M.default.createElement("div",{className:"processInfos"},M.default.createElement("div",{className:"processInfo"},this.genProcessHisInfoRows(),this.genProcessVarInfoRows()),M.default.createElement("div",{className:"processImg"})),M.default.createElement(P.default,{defaultActiveKey:["1","2"],onChange:this.callback.bind(this)},this.genPanels()),this.state.collapseIndex)}}]),t}(S.Component)),Q=b.default.create()(X),Y=i("TaskDetails")(function(e){function t(e){l(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={recResult:[],processVarInfo:[],processHisInfo:[],processName:""},n.key="",n}return s(t,e),L(t,[{key:"getTaskData",value:function(e,t){var n=new Promise(function(n,r){a.ajax({type:"GET",url:"/DZOMS/ky/history/historic-task-instances/"+e,dataType:"json",contentType:"application/json",success:function(a){t[e].assignee=a.assignee,t[e].time=a.endTime,t[e].name=a.name,n("")},error:function(e){alert("操作失败"),r("")}})});return n}},{key:"getRuntimeData",value:function(e,t){var n=new Promise(function(n,r){a.ajax({type:"GET",url:"/DZOMS/ky/form/form-data?taskId="+e,dataType:"json",contentType:"application/json",success:function(a){t[e]=a,t[e].name="当前处理节点",n("")},error:function(e){alert("操作失败"),r("")}})});return n}},{key:"componentDidMount",value:function(){var e=this,t=window.location.pathname.substring(window.location.pathname.lastIndexOf("/")+1),n=[];a.ajax({type:"GET",url:"/DZOMS/ky/runtime/tasks/"+t,dataType:"json",contentType:"application/json",success:function(r){console.log(r),n.splice(0,0,r),window.processInstanceId=r.processInstanceId,a.ajax({type:"GET",url:"/DZOMS/ky/history/historic-process-instances/"+window.processInstanceId,dataType:"json",contentType:"application/json",success:function(t){var n=[];n.push(t),console.log(n),e.setState({processHisInfo:n})},error:function(e){alert("操作失败")}}),a.ajax({type:"GET",url:"/DZOMS/ky/history/historic-variable-instances?processInstanceId="+window.processInstanceId,dataType:"json",contentType:"application/json",success:function(n){if(n.data){for(var a=null,r={},l=[],o=0;o<n.data.length;o++)n.data[o].taskId===a?l.push(n.data[o]):r[n.data[o].taskId]?r[n.data[o].taskId].variables.push(n.data[o].variable):(r[n.data[o].taskId]={},r[n.data[o].taskId].variables=[],r[n.data[o].taskId].variables.push(n.data[o].variable));var s=[];for(var i in r)s.push(e.getTaskData(i,r));s.push(e.getRuntimeData(t,r)),Promise.all(s).then(function(t){var n=Object.keys(r).sort(),a=[];n.map(function(e){a.push(r[e])}),e.setState({recResult:a,processVarInfo:l})}).catch(function(e){console.log(e)})}},error:function(e){alert("操作失败")}})},error:function(e){alert("操作失败")}})}},{key:"render",value:function(){this.state.recResult;return M.default.createElement("div",null,M.default.createElement(Q,{data:this.state.recResult,processVarInfo:this.state.processVarInfo,processHisInfo:this.state.processHisInfo}))}}]),t}(M.default.Component));document.getElementById("taskDetails")&&F.default.render(M.default.createElement(Y,null),document.getElementById("taskDetails")),t.default=Y}).call(t,n(25)(e),n(32))},504:function(e,t,n){(function(e,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){return function(t){return j(O(t,e),e)}}Object.defineProperty(t,"__esModule",{value:!0});var c=(n(46),n(45)),u=r(c),f=(n(23),n(22)),d=r(f),p=(n(38),n(37)),m=r(p),h=n(62),y=r(h),v=n(58),b=r(v),g=n(1),k=r(g),E=n(59),w=r(E),x=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),P=n(13),C=r(P),T={TaskList:{displayName:"TaskList"}},j=(0,w.default)({filename:"/Users/huang/work/newProject/components/process/taskList.js",components:T,locals:[e],imports:[k.default]}),O=(0,b.default)({filename:"/Users/huang/work/newProject/components/process/taskList.js",components:T,locals:[],imports:[k.default,y.default]}),I=(m.default.Item,i("TaskList")(function(e){function t(e){l(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={recResult:[],processName:""},n.key=0,n}return s(t,e),x(t,[{key:"componentDidMount",value:function(){var e=this;a.ajax({type:"get",url:"/DZOMS/ky/runtime/tasks",dataType:"json",contentType:"application/json",success:function(t){e.setState({recResult:t.data})},error:function(e){alert("操作失败")}})}},{key:"execute",value:function(e){window.location.href="/DZOMS/ky/activity/task/execute/"+this.state.recResult[e].id}},{key:"render",value:function(){var e=this;console.log(this.state.recResult);var t=[{title:"序号",render:function(e,t,n){return k.default.createElement("span",null,n++)}},{title:"流程名称",dataIndex:"processDefinitionId"},{title:"任务ID",dataIndex:"id"},{title:"任务名称",dataIndex:"name"},{title:"创建时间",dataIndex:"createTime"},{title:"操作人",dataIndex:"assignee"},{title:"执行",dataIndex:"pingfen",render:function(t,n,a){return k.default.createElement(d.default,{onClick:e.execute.bind(e,a,t)},"执行")}}];return k.default.createElement("div",null,k.default.createElement(u.default,{key:this.key++,columns:t,dataSource:this.state.recResult}))}}]),t}(k.default.Component)));document.getElementById("taskList")&&C.default.render(k.default.createElement(I,null),document.getElementById("taskList")),t.default=I}).call(t,n(25)(e),n(32))},717:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e){var t=e;return Array.isArray(t)||(t=t?[t]:[]),t}Object.defineProperty(t,"__esModule",{value:!0});var s=n(1),i=a(s),c=n(718),u=a(c),f=n(721),d=a(f),p=n(4),m=a(p),h=i.default.createClass({displayName:"Collapse",propTypes:{children:s.PropTypes.any,prefixCls:s.PropTypes.string,activeKey:s.PropTypes.oneOfType([s.PropTypes.string,s.PropTypes.arrayOf(s.PropTypes.string)]),defaultActiveKey:s.PropTypes.oneOfType([s.PropTypes.string,s.PropTypes.arrayOf(s.PropTypes.string)]),openAnimation:s.PropTypes.object,onChange:s.PropTypes.func,accordion:s.PropTypes.bool,className:s.PropTypes.string,style:s.PropTypes.object},statics:{Panel:u.default},getDefaultProps:function(){return{prefixCls:"rc-collapse",onChange:function(){},accordion:!1}},getInitialState:function(){var e=this.props,t=e.activeKey,n=e.defaultActiveKey,a=n;return"activeKey"in this.props&&(a=t),{openAnimation:this.props.openAnimation||(0,d.default)(this.props.prefixCls),activeKey:o(a)}},componentWillReceiveProps:function(e){"activeKey"in e&&this.setState({activeKey:o(e.activeKey)}),"openAnimation"in e&&this.setState({openAnimation:e.openAnimation})},onClickItem:function(e){var t=this;return function(){var n=t.state.activeKey;if(t.props.accordion)n=n[0]===e?[]:[e];else{n=[].concat(l(n));var a=n.indexOf(e),r=a>-1;r?n.splice(a,1):n.push(e)}t.setActiveKey(n)}},getItems:function(){var e=this,t=this.state.activeKey,n=this.props,a=n.prefixCls,r=n.accordion,l=[];return s.Children.forEach(this.props.children,function(n,o){if(n){var s=n.key||String(o),c=n.props.header,u=!1;u=r?t[0]===s:t.indexOf(s)>-1;var f={key:s,header:c,isActive:u,prefixCls:a,openAnimation:e.state.openAnimation,children:n.props.children,onItemClick:e.onClickItem(s).bind(e)};l.push(i.default.cloneElement(n,f))}}),l},setActiveKey:function(e){"activeKey"in this.props||this.setState({activeKey:e}),this.props.onChange(this.props.accordion?e[0]:e)},render:function(){var e,t=this.props,n=t.prefixCls,a=t.className,l=t.style,o=(0,m.default)((e={},r(e,n,!0),r(e,a,!!a),e));return i.default.createElement("div",{className:o,style:l},this.getItems())}});t.default=h,e.exports=t.default},718:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{
value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0});var l=n(1),o=a(l),s=n(4),i=a(s),c=n(719),u=a(c),f=n(54),d=a(f),p=o.default.createClass({displayName:"CollapsePanel",propTypes:{className:l.PropTypes.oneOfType([l.PropTypes.string,l.PropTypes.object]),children:l.PropTypes.any,openAnimation:l.PropTypes.object,prefixCls:l.PropTypes.string,header:l.PropTypes.oneOfType([l.PropTypes.string,l.PropTypes.number,l.PropTypes.node]),showArrow:l.PropTypes.bool,isActive:l.PropTypes.bool,onItemClick:l.PropTypes.func,style:l.PropTypes.object},getDefaultProps:function(){return{showArrow:!0,isActive:!1,onItemClick:function(){}}},handleItemClick:function(){this.props.onItemClick()},render:function(){var e,t=this.props,n=t.className,a=t.style,l=t.prefixCls,s=t.header,c=t.children,f=t.isActive,p=t.showArrow,m=l+"-header",h=(0,i.default)((e={},r(e,l+"-item",!0),r(e,l+"-item-active",f),e),n);return o.default.createElement("div",{className:h,style:a},o.default.createElement("div",{className:m,onClick:this.handleItemClick,role:"tab","aria-expanded":f},p&&o.default.createElement("i",{className:"arrow"}),s),o.default.createElement(d.default,{showProp:"isActive",exclusive:!0,component:"",animation:this.props.openAnimation},o.default.createElement(u.default,{prefixCls:l,isActive:f},c)))}});t.default=p,e.exports=t.default},719:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0});var l=n(1),o=a(l),s=n(4),i=a(s),c=o.default.createClass({displayName:"PanelContent",propTypes:{prefixCls:l.PropTypes.string,isActive:l.PropTypes.bool,children:l.PropTypes.any},shouldComponentUpdate:function(e){return this.props.isActive||e.isActive},render:function(){var e;if(this._isActived=this._isActived||this.props.isActive,!this._isActived)return null;var t=this.props,n=t.prefixCls,a=t.isActive,l=t.children,s=(0,i.default)((e={},r(e,n+"-content",!0),r(e,n+"-content-active",a),r(e,n+"-content-inactive",!a),e));return o.default.createElement("div",{className:s,role:"tabpanel"},o.default.createElement("div",{className:n+"-content-box"},l))}});t.default=c,e.exports=t.default},720:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(717),l=a(r);t.default=l.default,e.exports=t.default},721:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n,a){var r=void 0;return(0,s.default)(e,n,{start:function(){t?(r=e.offsetHeight,e.style.height=0):e.style.height=e.offsetHeight+"px"},active:function(){e.style.height=(t?r:0)+"px"},end:function(){e.style.height="",a()}})}function l(e){return{enter:function(t,n){return r(t,!0,e+"-anim",n)},leave:function(t,n){return r(t,!1,e+"-anim",n)}}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(143),s=a(o);t.default=l,e.exports=t.default},881:[902,147,147,147]});